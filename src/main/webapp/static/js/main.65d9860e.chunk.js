(this["webpackJsonpsoa-lab1-frontend"]=this["webpackJsonpsoa-lab1-frontend"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},114:function(e,t,n){},14:function(e,t,n){},17:function(e,t,n){},171:function(e,t,n){},185:function(e,t,n){},190:function(e,t){},192:function(e,t){},30:function(e,t,n){},312:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Ft}));n(14),n(17),n(104),n(171);var c=n(15),i=n(1);var o=function(){var e=Object(c.f)();return Object(i.jsx)("div",{className:"filter-header base",children:Object(i.jsxs)("div",{className:"tasks-div",children:[Object(i.jsx)("button",{id:"new-ticket-but",onClick:function(t){t.preventDefault(),e.push("/soa-lab1/additional/type")},children:"TYPES TASK"}),Object(i.jsx)("button",{id:"new-ticket-but",onClick:function(t){t.preventDefault(),e.push("/soa-lab1/additional/discount")},children:"DISCOUNT TASK"}),Object(i.jsx)("button",{id:"new-ticket-but",onClick:function(t){t.preventDefault(),e.push("/soa-lab1/additional/person")},children:"PERSON TASK"})]})})},a=n(39),r=(n(105),n(18)),s=n(3),l="id",d="name",u="coordinate",j="date",b="discount",O="price",m="type",h="person",f="SET_PER_PAGE",p="SET_CUR_PAGE",x="SET_CUR_CRITERION",v="SET_ITEM_COUNT",y="DELETE_TICKET",g="SET_SORT",k="REMOVE_SORT",S="SHOW_MODAL",T="SET_FILTER",N="REMOVE_FILTER";var D=function(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)((function(e){return e.page.sortBy})),n=Object(s.useSelector)((function(e){return e.page.filters})),c=Object(s.useSelector)((function(e){return e.page.curCriterion}));function o(n){var c=document.getElementById("sort-"+n);t.includes(n)?(e({type:k,payload:n}),c.style.color="rgba(255,255,255,0.5)"):(e({type:g,payload:n}),c.style.color="rgb(255,255,255)")}function f(t,i){console.log("CUR = "+c);var o,r=document.getElementById("filter-"+i),s=Object(a.a)(n);try{for(s.s();!(o=s.n()).done;){if(o.value.name===i)return e({type:N,payload:i}),void(r.style.color="rgba(255,255,255,0.5)")}}catch(l){s.e(l)}finally{s.f()}t&&e({type:x,payload:i}),e({type:S,payload:t})}return Object(i.jsxs)("div",{className:"table-header base",id:"table-header",children:[Object(i.jsxs)("div",{className:"id-div",children:[Object(i.jsx)("span",{children:"Id"}),Object(i.jsx)(r.c,{color:"rgba(255,255,255,0.5)",className:"pointer",id:"sort-id",onClick:function(){return o(l)}}),Object(i.jsx)(r.b,{color:"rgba(255,255,255,0.5)",className:"pointer",id:"filter-id",onClick:function(){return f(!0,l)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"Name"}),Object(i.jsx)(r.c,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"sort-name",onClick:function(){return o(d)}}),Object(i.jsx)(r.b,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"filter-name",onClick:function(){return f(!0,d)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"Coordinates"}),Object(i.jsx)(r.c,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"sort-coordinate",onClick:function(){return o(u)}}),Object(i.jsx)(r.b,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"filter-coordinate",onClick:function(){return f(!0,u)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"Creation Date"}),Object(i.jsx)(r.c,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"sort-date",onClick:function(){return o(j)}}),Object(i.jsx)(r.b,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"filter-date",onClick:function(){return f(!0,j)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"Discount"}),Object(i.jsx)(r.c,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"sort-discount",onClick:function(){return o(b)}}),Object(i.jsx)(r.b,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"filter-discount",onClick:function(){return f(!0,b)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"Price"}),Object(i.jsx)(r.c,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"sort-price",onClick:function(){return o(O)}}),Object(i.jsx)(r.b,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"filter-price",onClick:function(){return f(!0,O)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"Type"}),Object(i.jsx)(r.c,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"sort-type",onClick:function(){return o(m)}}),Object(i.jsx)(r.b,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"filter-type",onClick:function(){return f(!0,m)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"Person id"}),Object(i.jsx)(r.c,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"sort-person",onClick:function(){return o(h)}}),Object(i.jsx)(r.b,{className:"pointer",color:"rgba(255,255,255,0.5)",id:"filter-person",onClick:function(){return f(!0,h)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("span",{children:"Action"})})]})},E=n(60),C=(n(185),n(2)),L=n(318),w=n(319);var I=function(){var e=Object(s.useSelector)((function(e){return e.page.perPage})),t=Object(s.useSelector)((function(e){return e.page.currentPage})),n=Object(s.useSelector)((function(e){return e.page.itemCount})),o=Object(s.useDispatch)(),a=Object(c.f)(),r=Object(C.useState)("10"),l=Object(E.a)(r,2),d=l[0],u=l[1],j=Object(C.useState)("1"),b=Object(E.a)(j,2),O=b[0],m=b[1];function h(t){t>0&&(t-1)*e-n<0&&(m(t),o({type:p,payload:t}))}return Object(i.jsxs)("div",{className:"footer base",children:[Object(i.jsx)("button",{id:"new-ticket-but",onClick:function(){a.push("/soa-lab1/new")},children:Object(i.jsxs)("div",{className:"icon-but",children:[Object(i.jsx)("div",{className:"icon",children:Object(i.jsx)(L.a,{color:"#4683de"})}),"ADD TICKET"]})}),Object(i.jsxs)("div",{className:"page-footer",children:[Object(i.jsx)("span",{children:"Per Page"}),Object(i.jsx)("input",{id:"current-num",value:d,onChange:function(e){var t=e.target.value;u(t)},onFocus:function(e){u("")},onBlur:function(e){var t=e.target.value;""!==t&&Number.isInteger(Number(t))&&Number(t)>0?o({type:f,payload:t}):(u("10"),o({type:f,payload:10}))}}),Object(i.jsx)("span",{children:"Total"}),Object(i.jsx)("input",{id:"current-page",value:n,contentEditable:"false"}),Object(i.jsx)("div",{id:"left-arrow",children:Object(i.jsx)(w.a,{className:"pointer",color:"rgb(70,131,222)",onClick:function(){return h(t-1)}})}),Object(i.jsx)("input",{id:"current-page",value:O,onChange:function(e){var t=e.target.value;m(t)},onFocus:function(e){m("")},onBlur:function(e){var t=e.target.value;o({type:p,payload:t}),""!==t&&Number.isInteger(Number(t))&&Number(t)>0?o({type:p,payload:t}):(m("1"),o({type:p,payload:1}))}}),Object(i.jsx)("div",{id:"right-arrow",children:Object(i.jsx)(w.b,{className:"pointer",color:"rgb(70,131,222)",onClick:function(){return h(t+1)}})})]})]})},P="SET_TICKETS",R="SET_EDITED_TICKET",_="coordinates",A="/soa-lab1/";var B={compact:!0,textFn:function(e,t){try{var n=Object.keys(t._parent).length,c=Object.keys(t._parent)[n-1];t._parent[c]=function(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}(e)}catch(i){}}},M={compact:!0,fullTagEmptyElement:!0},K=n(12),Y=n(10),U=n.n(Y),F=function(e){var t={title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"};return t.message=e,t.position="tr",t.autoDismiss=3,t};function G(e){var t=e.perPage,c=e.currentPage,i=function(e){if(0===e.length)return"";var t,n="&sortBy=",c=Object(a.a)(e);try{for(c.s();!(t=c.n()).done;)n=n+t.value+";"}catch(i){c.e(i)}finally{c.f()}return n.substring(0,n.length-1)}(e.sortBy),o=function(e){if(0===e.length)return"";var t,n="&filterBy=",c=Object(a.a)(e);try{for(c.s();!(t=c.n()).done;){var i=t.value;switch(i.name){case l:n=n+l+","+i.from+","+i.to+";";break;case d:n=n+d+","+i.like+";";break;case b:n=n+b+","+i.from+","+i.to+";";break;case O:n=n+O+","+i.from+","+i.to+";";break;case m:n=n+m+","+i.like+";";break;case j:n=n+j+","+i.from+","+i.to+";";break;case h:n=n+h+","+i.from+","+i.to+";";break;case u:n=n+u+","+i.xfrom+","+i.xto+","+i.yfrom+","+i.yto+";"}}}catch(o){c.e(o)}finally{c.f()}return n.substring(0,n.length-1)}(e.filters);return function(e){fetch("/soa-lab1/tickets?perPage="+t+"&curPage="+c+i+o,{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(e.ok)return e.text();throw e})).then((function(t){var c=n(12).xml2js(t,B),i=c.ticketDTOList.count,o=c.ticketDTOList.tickets.ticket;e({type:P,payload:o}),e({type:v,payload:i})})).catch((function(t){console.log(t),t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}function H(e){var t={};return t.id=e.id,t.name=e.name,t.creationDate=e.creationDate,void 0!==e.price&&(t.price=e.price),t.type=e.type,t.discount=e.discount,t.coordinates={},t.coordinates.id=e.coordinates,t.person={},t.person.id=e.person,t.person.location={},t.person.location.id=e.locations,t}n(114);var W=function(e){var t=e.ticket,o=t.id,a=Object(s.useDispatch)(),l=Object(c.f)();function d(e){a(function(e){return function(t){fetch("/soa-lab1/tickets/"+e,{method:"DELETE",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(!e.ok)throw e;t({type:y})})).catch((function(e){e.text().then((function(e){var c=n(12).xml2js(e,B).exceptionDTO.message;t(U.a.error(F(c)))}))}))}}(e))}return Object(i.jsxs)("div",{className:"table-row base",children:[Object(i.jsx)("div",{className:"id-div",children:o}),Object(i.jsx)("div",{children:t.name}),Object(i.jsxs)("div",{children:["(",t.coordinates.x," ; ",t.coordinates.y,")"]}),Object(i.jsx)("div",{children:t.creationDate}),Object(i.jsx)("div",{children:t.discount}),Object(i.jsx)("div",{children:t.price}),Object(i.jsx)("div",{children:t.type.toLowerCase()}),Object(i.jsx)("div",{children:void 0===t.person?"null":t.person.id}),Object(i.jsxs)("div",{className:"action-div",children:[Object(i.jsx)("div",{onClick:function(){return e=o,void l.push("/soa-lab1/edit/"+e);var e},children:Object(i.jsx)(r.a,{color:"#3DC937FF",className:"pointer icon"})}),Object(i.jsx)("div",{onClick:function(){return d(o)},children:Object(i.jsx)(r.d,{className:"pointer icon",color:"#EB6767FF"})})]})]})};var X=function(e){var t,n=e.tickets;return void 0===n?Object(i.jsx)("div",{className:"table-row base id-div",children:Object(i.jsx)("div",{className:"id-div",children:"No data."})}):(t=Array.isArray(n)?n.map((function(e){return Object(i.jsx)(W,{ticket:e},e.id)})):Object(i.jsx)(W,{ticket:n},n.id),Object(i.jsxs)("div",{children:[" ",t]}))},z="SET_COORDINATES",q="SET_EDITED_COORDINATES";function V(){return function(e){fetch("/soa-lab1/coordinates",{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(console.log(e.status),!e.ok)throw e;return e.text()})).then((function(t){console.log("RESPONSE = "+t);var c=n(12).xml2js(t,B).coordinatesDTOList.coordinates.coordinate;e({type:z,payload:c})})).catch((function(t){console.log(t),t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}var J=function(){var e=Object(c.f)();return Object(i.jsx)("div",{className:"filter-header base",children:Object(i.jsxs)("div",{className:"tasks-div",children:[Object(i.jsx)("button",{id:"new-ticket-but",onClick:function(t){t.preventDefault(),e.push("/soa-lab1/location/new")},children:"ADD LOCATION"}),Object(i.jsx)("button",{id:"new-ticket-but",onClick:function(t){t.preventDefault(),e.push("/soa-lab1/person/new")},children:"ADD PERSON"}),Object(i.jsx)("button",{id:"new-ticket-but",onClick:function(t){t.preventDefault(),e.push("/soa-lab1/coordinates/new")},children:"ADD COORDINATES"})]})})};var Q=function(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)((function(e){return e.page})),n=Object(s.useSelector)((function(e){return e.tickets.ticketList}));return Object(C.useEffect)((function(){e(G(t)),e(V())}),[t.currentPage,t.perPage,t.deleteItem,t.sortBy,t.filters]),Object(i.jsxs)("div",{className:"movie-table",children:[Object(i.jsx)(J,{}),Object(i.jsx)(o,{}),Object(i.jsx)(D,{}),Object(i.jsx)(X,{tickets:n}),Object(i.jsx)(I,{})]})};var Z=function(){return Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsx)("h1",{children:"Ticket Table"}),Object(i.jsx)(Q,{})]})},$=n(20),ee=n(135),te=n(136),ne=(n(30),n(5)),ce=function(e){var t=e.input,n=e.label,c=e.readonly,o=e.type,a=e.meta,r=a.touched,s=a.error,l=a.warning;return Object(i.jsxs)("div",{className:"input-box",children:[Object(i.jsx)("div",{className:"label",children:n}),Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{placeholder:n,type:o,readOnly:c,className:r&&s?"input-error":""})),r&&(s&&Object(i.jsx)("span",{className:"error",children:s})||l&&Object(i.jsx)("span",{className:"error",children:l}))]})},ie=["","VIP","USUAL","BUDGETARY","CHEAP"],oe=["GREEN","RED","YELLOW"],ae="SET_PERSONS",re="SET_EDITED_PERSON";function se(){return function(e){fetch("/soa-lab1/persons",{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(!e.ok)throw e;return e.text()})).then((function(t){console.log("RESPONSE = "+t);var c=n(12).xml2js(t,B).personDTOList.persons.person;e({type:ae,payload:c})})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}function le(e){var t={};return t.id=e.id,t.height=e.height,t.eyeColor=e.eyeColor,t.location={},t.location.id=e.locations,t}var de=Object(te.a)({form:"edit-ticket-form",keepDirtyOnReinitialize:!0})((function(e){var t=e.handleSubmit,o=(e.pristine,e.reset,e.submitting),a=e.id,r=Object(s.useDispatch)(),l=Object(s.useSelector)((function(e){return e.tickets.editedTicket.id})),d=Object(s.useSelector)((function(e){return e.tickets.editedTicket.name})),u=Object(s.useSelector)((function(e){return e.tickets.editedTicket.discount})),j=Object(s.useSelector)((function(e){return e.tickets.editedTicket.price})),b=Object(s.useSelector)((function(e){return e.tickets.editedTicket.creationDate})),O=Object(s.useSelector)((function(e){return e.tickets.editedTicket.type})),m=Object(s.useSelector)((function(e){return e.tickets.editedTicket.coordinates})),h=Object(s.useSelector)((function(e){return e.tickets.editedTicket.person})),f=Object(s.useSelector)((function(e){return e.coordinates.coordinatesList})),p=(Object(s.useSelector)((function(e){return e.location.locationsList})),Object(s.useSelector)((function(e){return e.person.personsList}))),x=Object(c.f)();return Object(C.useEffect)((function(){r(function(e){return function(t){fetch("/soa-lab1/tickets/"+e,{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(console.log("STATUS "+e.status),!e.ok)throw e;return e.text()})).then((function(e){console.log(e);var n=K.xml2js(e,B).ticketDTOList.tickets.ticket;t({type:R,payload:n})})).catch((function(e){e.text().then((function(e){var c=n(12).xml2js(e,B).exceptionDTO.message;t(U.a.error(F(c)))}))}))}}(a)),r(V()),r(se())}),[]),Object(C.useEffect)((function(){e.reset(),e.initialize({name:d,id:l,discount:u,price:j,creationDate:b,type:O,coordinates:m.id,person:h.id})}),[a,d,u,j,O,m,h]),Object(i.jsxs)("form",{onSubmit:t,id:"ticket-form",children:[Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Ticket"}),Object(i.jsx)(ee.a,{name:"name",type:"text",component:ce,label:"Name"}),Object(i.jsx)(ee.a,{name:"discount",type:"number",component:ce,label:"Discount"}),Object(i.jsx)(ee.a,{name:"price",type:"number",component:ce,label:"Price"}),Object(i.jsx)(ee.a,{name:"creationDate",type:"text",component:ce,label:"Creation date",readonly:"readonly"}),Object(i.jsx)("div",{className:"label",children:"Type"}),Object(i.jsx)(ee.a,{name:"type",component:"select",label:"Type",children:ie.map((function(e){return Object(i.jsxs)("option",{value:e,selected:O===e,children:[e," "]},e)}))}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:o,children:"Submit"})})]}),Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Coordinates"}),Object(i.jsx)("div",{className:"label",children:"(X , Y)"}),Object(i.jsx)(ee.a,{name:"coordinates",id:"coordinates",component:"select",label:"Coordinates",children:f.map((function(e){return Object(i.jsxs)("option",{value:e.id,children:["(",e.x," , ",e.y,") "]},e.id)}))}),Object(i.jsxs)("div",{className:"buttons-div",children:[Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",onClick:function(e){e.preventDefault();var t=document.getElementById("coordinates");x.push("/soa-lab1/coordinates/edit/"+t.value)},children:"Edit"})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",onClick:function(e){e.preventDefault(),x.push("/soa-lab1/coordinates/new")},children:"Create"})})]})]}),Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Person"}),Object(i.jsx)("div",{className:"label",children:"Person's id"}),Object(i.jsx)(ee.a,{name:"person",id:"person",component:"select",children:p.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.id},e.id)}))}),Object(i.jsxs)("div",{className:"buttons-div",children:[Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",onClick:function(e){e.preventDefault();var t=document.getElementById("person");x.push("/soa-lab1/person/edit/"+t.value)},children:"Edit"})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",onClick:function(e){e.preventDefault(),x.push("/soa-lab1/person/new")},children:"Create"})})]})]})]})}));var ue=function(){var e=Object(c.g)().id,t=Object(s.useDispatch)();return Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsxs)("h2",{children:["Edit ticket (ID: ",e,")"]}),Object(i.jsx)("hr",{}),Object(i.jsx)(de,{id:e,onSubmit:function(e){t(function(e){var t=K.js2xml(H(e),M);return console.log("XML = "+t),function(e){fetch("/soa-lab1/tickets",{method:"PUT",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<ticketDTOList><tickets><ticket>"+t+"</ticket></tickets></ticketDTOList>"}).then((function(e){if(!e.ok)throw e;St.push("/soa-lab1"),window.location.reload(!1)})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(e))}})]})},je=Object(te.a)({form:"create-ticket-form"})((function(e){var t=e.handleSubmit,n=(e.pristine,e.reset,e.submitting),c=(e.id,Object(s.useDispatch)()),o=Object(s.useSelector)((function(e){return e.tickets.editedTicket.type})),a=Object(s.useSelector)((function(e){return e.coordinates.coordinatesList})),r=Object(s.useSelector)((function(e){return e.person.personsList}));return Object(C.useEffect)((function(){c(V()),c(se())}),[]),Object(C.useEffect)((function(){e.reset(),e.initialize({type:ie[0],coordinates:a[0].id,person:r[0].id})}),[a,r]),Object(i.jsxs)("form",{onSubmit:t,id:"ticket-form",children:[Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Ticket"}),Object(i.jsx)(ee.a,{name:"name",type:"text",component:ce,label:"Name"}),Object(i.jsx)(ee.a,{name:"discount",type:"number",component:ce,label:"Discount"}),Object(i.jsx)(ee.a,{name:"price",type:"number",component:ce,label:"Price"}),Object(i.jsx)("div",{className:"label",children:"Type"}),Object(i.jsx)(ee.a,{name:"type",component:"select",label:"Type",children:ie.map((function(e){return Object(i.jsxs)("option",{value:e,selected:o===e,children:[e," "]},e)}))}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:n,children:"Submit"})})]}),Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Coordinates"}),Object(i.jsx)("div",{className:"label",children:"(X , Y)"}),Object(i.jsx)(ee.a,{name:"coordinates",id:"coordinates",component:"select",label:"Coordinates",children:a.map((function(e){return Object(i.jsxs)("option",{value:e.id,children:["(",e.x," , ",e.y,") "]},e.id)}))})]}),Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Person"}),Object(i.jsx)("div",{className:"label",children:"Person's id"}),Object(i.jsx)(ee.a,{name:"person",id:"person",component:"select",children:r.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.id},e.id)}))})]})]})}));var be=function(){var e=Object(s.useDispatch)();return Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsx)("h1",{children:"Create ticket"}),Object(i.jsx)(je,{onSubmit:function(t){e(function(e){var t=K.js2xml(H(e),M);return console.log("XML = "+t),function(e){fetch("/soa-lab1/tickets",{method:"POST",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<ticketDTOList><tickets><ticket>"+t+"</ticket></tickets></ticketDTOList>"}).then((function(e){if(!e.ok)throw e;St.push("/soa-lab1"),window.location.reload(!1)})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(t))}})]})},Oe=n(142),me=n.n(Oe),he=n(13),fe=(n(32),function(e){var t=e.input,n=e.type,c=e.meta,o=c.touched,a=c.error;c.warning;return Object(i.jsx)("div",{className:"number-box",children:Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{type:n,className:o&&a?"input-error":""}))})}),pe=function(e){return e?void 0:"Required"},xe=Object(te.a)({form:"id-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("id-filter-form"))}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with id in range"}),Object(i.jsxs)("div",{className:"range-container",children:[Object(i.jsx)(ee.a,{name:"from",type:"text",component:fe,label:"from",validate:[pe]}),Object(i.jsx)("div",{children:" \u2014"}),Object(i.jsx)(ee.a,{name:"to",type:"text",component:fe,label:"to",validate:[pe]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var ve=function(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)((function(e){return e.page.filters}));return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(xe,{onSubmit:function(n){var c,i=document.getElementById("filter-id"),o=Object(a.a)(t);try{for(o.s();!(c=o.n()).done;){"id"===c.value.name&&e({type:"REMOVE_FILTER",payload:"id"})}}catch(s){o.e(s)}finally{o.f()}var r={name:"id"};r.from=n.from,r.to=n.to,e({type:"SET_FILTER",payload:r}),i.style.color="rgb(255,255,255)",e({type:"SHOW_MODAL",payload:!1})}})})},ye=function(e){var t=e.input,n=e.type,c=e.meta,o=c.touched,a=c.error;c.warning;return Object(i.jsx)("div",{className:"text-box",children:Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{type:n,className:o&&a?"input-error":""}))})},ge=function(e){return e?void 0:"Required"},ke=Object(te.a)({form:"name-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("name-filter-form"))}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with title like"}),Object(i.jsx)("div",{className:"text-box-container",children:Object(i.jsx)(ee.a,{name:"like",type:"text",component:ye,label:"from",validate:[ge]})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var Se=function(){var e=Object(s.useDispatch)();return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(ke,{onSubmit:function(t){var n=document.getElementById("filter-name"),c={name:"name"};c.like=t.like,e({type:T,payload:c}),n.style.color="rgb(255,255,255)",e({type:S,payload:!1})}})})},Te=function(e){var t=e.input,n=e.type,c=e.meta,o=c.touched,a=c.error;c.warning;return Object(i.jsx)("div",{className:"number-box",children:Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{type:n,className:o&&a?"input-error":""}))})},Ne=function(e){return e?void 0:"Required"},De=Object(te.a)({form:"coordinate-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("coordinate-filter-form"))}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with x in range"}),Object(i.jsxs)("div",{className:"range-container",children:[Object(i.jsx)(ee.a,{name:"xfrom",type:"text",component:Te,label:"from",validate:[Ne]}),Object(i.jsx)("div",{children:" \u2014"}),Object(i.jsx)(ee.a,{name:"xto",type:"text",component:Te,label:"to",validate:[Ne]})]}),Object(i.jsx)("h3",{children:"Select tickets with y in range"}),Object(i.jsxs)("div",{className:"range-container",children:[Object(i.jsx)(ee.a,{name:"yfrom",type:"text",component:Te,label:"from",validate:[Ne]}),Object(i.jsx)("div",{children:" \u2014"}),Object(i.jsx)(ee.a,{name:"yto",type:"text",component:Te,label:"to",validate:[Ne]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var Ee=function(){var e=Object(s.useDispatch)();return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(De,{onSubmit:function(t){var n=document.getElementById("filter-coordinate"),c={};c.name=u,c.xfrom=t.xfrom,c.xto=t.xto,c.yfrom=t.yfrom,c.yto=t.yto,e({type:"SET_FILTER",payload:c}),n.style.color="rgb(255,255,255)",e({type:"SHOW_MODAL",payload:!1})}})})},Ce=n(141),Le=n.n(Ce),we=function(e){var t=e.input,n=e.label,c=e.type,o=e.onKeyDown,a=e.meta,r=a.touched,s=a.error,l=a.warning;return Object(i.jsxs)("div",{className:"date-box",children:[Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{placeholder:n,type:c,onKeyDown:o,className:r&&s?"input-error":""})),r&&(s&&Object(i.jsx)("span",{className:"error",children:s})||l&&Object(i.jsx)("span",{className:"error",children:l}))]})},Ie=function(e){return e?void 0:"Required"},Pe=function(e){return Le()(e,"DD/MM/YYYY",!0).isValid()?void 0:"Date is incorrect"},Re=function(e){var t;window.event?t=window.event.keyCode:e&&(t=e.which);var n=e.target.value.length;8!==t&&(2!==n&&5!==n||(e.target.value+="/"))},_e=Object(te.a)({form:"id-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("id-filter-form"))}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with date in range"}),Object(i.jsxs)("div",{className:"date-range-container",children:[Object(i.jsx)(ee.a,{name:"from",type:"text",component:we,label:"DD/MM/YYYY",onKeyDown:Re,validate:[Ie,Pe]}),Object(i.jsx)("div",{id:"date-dash",children:" \u2014"}),Object(i.jsx)(ee.a,{name:"to",type:"text",component:we,label:"DD/MM/YYYY",onKeyDown:Re,validate:[Ie,Pe]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var Ae=function(){var e=Object(s.useDispatch)();return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(_e,{onSubmit:function(t){var n=document.getElementById("filter-date"),c={};c.name=j,c.from=t.from,c.to=t.to,e({type:"SET_FILTER",payload:c}),n.style.color="rgb(255,255,255)",e({type:"SHOW_MODAL",payload:!1})}})})},Be=function(e){var t=e.input,n=e.type,c=e.meta,o=c.touched,a=c.error;c.warning;return Object(i.jsx)("div",{className:"number-box",children:Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{type:n,className:o&&a?"input-error":""}))})},Me=function(e){return e?void 0:"Required"},Ke=Object(te.a)({form:"discount-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("discount-filter-form"))}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with discount in range"}),Object(i.jsxs)("div",{className:"range-container",children:[Object(i.jsx)(ee.a,{name:"from",type:"text",component:Be,label:"from",validate:[Me]}),Object(i.jsx)("div",{children:" \u2014"}),Object(i.jsx)(ee.a,{name:"to",type:"text",component:Be,label:"to",validate:[Me]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var Ye=function(){var e=Object(s.useDispatch)();return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(Ke,{onSubmit:function(t){var n=document.getElementById("filter-discount"),c={};c.name=b,c.from=t.from,c.to=t.to,e({type:"SET_FILTER",payload:c}),n.style.color="rgb(255,255,255)",e({type:"SHOW_MODAL",payload:!1})}})})},Ue=function(e){var t=e.input,n=e.type,c=e.meta,o=c.touched,a=c.error;c.warning;return Object(i.jsx)("div",{className:"number-box",children:Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{type:n,className:o&&a?"input-error":""}))})},Fe=function(e){return e?void 0:"Required"},Ge=Object(te.a)({form:"price-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("price-filter-form"))}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with price in range"}),Object(i.jsxs)("div",{className:"range-container",children:[Object(i.jsx)(ee.a,{name:"from",type:"text",component:Ue,label:"from",validate:[Fe]}),Object(i.jsx)("div",{children:" \u2014"}),Object(i.jsx)(ee.a,{name:"to",type:"text",component:Ue,label:"to",validate:[Fe]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var He=function(){var e=Object(s.useDispatch)();return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(Ge,{onSubmit:function(t){var n=document.getElementById("filter-price"),c={};c.name=O,c.from=t.from,c.to=t.to,e({type:"SET_FILTER",payload:c}),n.style.color="rgb(255,255,255)",e({type:"SHOW_MODAL",payload:!1})}})})},We=Object(te.a)({form:"type-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("type-filter-form"))},validate:function(e){var t={};return e.compare||(t.compare="Required"),t}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with type"}),Object(i.jsxs)("div",{className:"radio-group",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)(ee.a,{name:"compare",component:"input",type:"radio",value:"VIP"}),"Vip"]}),Object(i.jsxs)("label",{children:[Object(i.jsx)(ee.a,{name:"compare",component:"input",type:"radio",value:"USUAL"}),"Usual"]}),Object(i.jsxs)("label",{children:[Object(i.jsx)(ee.a,{name:"compare",component:"input",type:"radio",value:"BUDGETARY"}),"Budgetary"]}),Object(i.jsxs)("label",{children:[Object(i.jsx)(ee.a,{name:"compare",component:"input",type:"radio",value:"CHEAP"}),"Cheap"]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var Xe=function(){var e=Object(s.useDispatch)();return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(We,{onSubmit:function(t){var n=document.getElementById("filter-type"),c={};c.name=m,c.like=t.compare,e({type:"SET_FILTER",payload:c}),n.style.color="rgb(255,255,255)",e({type:"SHOW_MODAL",payload:!1})}})})},ze=function(e){var t=e.input,n=e.type,c=e.meta,o=c.touched,a=c.error;c.warning;return Object(i.jsx)("div",{className:"number-box",children:Object(i.jsx)("input",Object(ne.a)(Object(ne.a)({},t),{},{type:n,className:o&&a?"input-error":""}))})},qe=function(e){return e?void 0:"Required"},Ve=Object(te.a)({form:"person-filter-form",onSubmitSuccess:function(e,t){return t(Object(he.a)("person-filter-form"))}})((function(e){var t=e.handleSubmit,n=e.submitting;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:"Select tickets with person id in range"}),Object(i.jsxs)("div",{className:"range-container",children:[Object(i.jsx)(ee.a,{name:"from",type:"text",component:ze,label:"from",validate:[qe]}),Object(i.jsx)("div",{children:" \u2014"}),Object(i.jsx)(ee.a,{name:"to",type:"text",component:ze,label:"to",validate:[qe]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"ok-but",disabled:n,children:"OK"})})]})}));var Je=function(){var e=Object(s.useDispatch)();return Object(i.jsx)("div",{className:"table-layout",children:Object(i.jsx)(Ve,{onSubmit:function(t){var n=document.getElementById("filter-person"),c={};c.name=h,c.from=t.from,c.to=t.to,e({type:"SET_FILTER",payload:c}),n.style.color="rgb(255,255,255)",e({type:"SHOW_MODAL",payload:!1})}})})},Qe=(n(312),function(e){var t=e.active,n=e.setActive,c=e.children;return Object(i.jsx)("div",{className:t?"modal active":"modal",onClick:function(){return n(!1)},children:Object(i.jsx)("div",{className:t?"modal-content active":"modal-content",onClick:function(e){return e.stopPropagation()},children:c})})}),Ze=Object(te.a)({form:"edit-coordinates-form",keepDirtyOnReinitialize:!0})((function(e){var t=e.handleSubmit,c=(e.pristine,e.reset,e.submitting),o=e.id,a=Object(s.useDispatch)(),r=Object(s.useSelector)((function(e){return e.coordinates.editedCoordinates}));return Object(C.useEffect)((function(){a(function(e){return function(t){fetch(A+_+"/"+e,{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(!e.ok)throw e;return e.text()})).then((function(e){console.log(e);var n=K.xml2js(e,B).coordinatesDTOList.coordinates.coordinate;t({type:q,payload:n})})).catch((function(e){console.log(e),e.text().then((function(e){var c=n(12).xml2js(e,B).exceptionDTO.message;t(U.a.error(F(c)))}))}))}}(o))}),[]),Object(C.useEffect)((function(){e.reset(),e.initialize({id:r.id,x:r.x,y:r.y})}),[r]),Object(i.jsx)("form",{onSubmit:t,id:"ticket-form",children:Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Coordinates"}),Object(i.jsx)(ee.a,{name:"x",type:"number",component:ce,label:"X"}),Object(i.jsx)(ee.a,{name:"y",type:"number",component:ce,label:"Y"}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:c,children:"Submit"})})]})})}));var $e=function(){var e=Object(c.g)().id,t=Object(s.useDispatch)(),o=Object(s.useSelector)((function(e){return e.coordinates.editedCoordinates.id}));return Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsxs)("h2",{children:["Edit Coordinates (ID: ",e,")"]}),Object(i.jsx)("hr",{}),Object(i.jsx)(Ze,{id:e,onSubmit:function(e){t(function(e,t){var c=K.js2xml(function(e){var t={};return t.id=e.id,t.x=e.x,t.y=e.y,t}(e),M);return console.log("XML = "+c),function(e){fetch("/soa-lab1/coordinates",{method:"PUT",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<coordinatesDTOList><coordinates><coordinate>"+c+"</coordinate></coordinates></coordinatesDTOList>"}).then((function(e){if(!e.ok)throw e;St.push("/soa-lab1/edit/"+t),window.location.reload(!1)})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(e,o))}})]})},et=Object(te.a)({form:"create-coordinates-form",keepDirtyOnReinitialize:!0})((function(e){var t=e.handleSubmit,n=(e.pristine,e.reset,e.submitting);e.id;return Object(i.jsx)("form",{onSubmit:t,children:Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Coordinates"}),Object(i.jsx)(ee.a,{name:"x",type:"number",component:ce,label:"X"}),Object(i.jsx)(ee.a,{name:"y",type:"number",component:ce,label:"Y"}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:n,children:"Submit"})})]})})}));var tt=function(){var e=Object(s.useDispatch)();return Object(s.useSelector)((function(e){return e.coordinates.editedCoordinates.id})),Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsx)("h2",{children:"Create Coordinates"}),Object(i.jsx)("hr",{}),Object(i.jsx)(et,{onSubmit:function(t){e(function(e,t){var c=K.js2xml(e,M);return function(e){fetch("/soa-lab1/coordinates",{method:"POST",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<coordinatesDTOList><coordinates><coordinate>"+c+"</coordinate></coordinates></coordinatesDTOList>"}).then((function(e){if(!e.ok)throw e;St.push("/soa-lab1"),window.location.reload(!1)})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(t))}})]})},nt="SET_LOCATIONS",ct="SET_EDITED_LOCATION";function it(){return function(e){fetch("/soa-lab1/locations",{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(!e.ok)throw e;return e.text()})).then((function(t){console.log("RESPONSE = "+t);var c=n(12).xml2js(t,B).locationDTOList.locations.location;e({type:nt,payload:c})})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}var ot=Object(te.a)({form:"edit-location-form",keepDirtyOnReinitialize:!0})((function(e){var t=e.handleSubmit,c=(e.pristine,e.reset,e.submitting),o=e.id,a=Object(s.useDispatch)(),r=Object(s.useSelector)((function(e){return e.location.editedLocation}));return Object(C.useEffect)((function(){a(function(e){return function(t){fetch("/soa-lab1/locations/"+e,{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(!e.ok)throw e;return e.text()})).then((function(e){console.log(e);var n=K.xml2js(e,B).locationDTOList.locations.location;t({type:ct,payload:n})})).catch((function(e){e.text().then((function(e){var c=n(12).xml2js(e,B).exceptionDTO.message;t(U.a.error(F(c)))}))}))}}(o))}),[]),Object(C.useEffect)((function(){e.reset(),e.initialize({id:r.id,x:r.x,y:r.y,name:r.name})}),[r]),Object(i.jsx)("form",{onSubmit:t,id:"ticket-form",children:Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Location"}),Object(i.jsx)(ee.a,{name:"name",type:"text",component:ce,label:"Name of location"}),Object(i.jsx)(ee.a,{name:"x",type:"number",component:ce,label:"X"}),Object(i.jsx)(ee.a,{name:"y",type:"number",component:ce,label:"Y"}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:c,children:"Submit"})})]})})}));var at=function(){var e=Object(c.g)().id,t=Object(s.useDispatch)();return Object(s.useSelector)((function(e){return e.location.editedLocation.id})),Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsxs)("h2",{children:["Edit Location (ID: ",e,")"]}),Object(i.jsx)("hr",{}),Object(i.jsx)(ot,{id:e,onSubmit:function(e){t(function(e,t){console.log(e);var c=K.js2xml(function(e){var t={};return t.id=e.id,t.x=e.x,t.y=e.y,t.name=e.name,t}(e),M);return console.log("XML = "+c),function(e){fetch("/soa-lab1/locations",{method:"PUT",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<locationDTOList><locations><location>"+c+"</location></locations></locationDTOList>"}).then((function(e){if(e.ok)return e.text();throw e})).then((function(e){St.goBack()})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(e))}})]})},rt=Object(te.a)({form:"create-location-form"})((function(e){var t=e.handleSubmit,n=(e.pristine,e.reset,e.submitting);e.id;return Object(i.jsx)("form",{onSubmit:t,id:"ticket-form",children:Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Location"}),Object(i.jsx)(ee.a,{name:"name",type:"text",component:ce,label:"Name of location"}),Object(i.jsx)(ee.a,{name:"x",type:"number",component:ce,label:"X"}),Object(i.jsx)(ee.a,{name:"y",type:"number",component:ce,label:"Y"}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:n,children:"Submit"})})]})})}));var st=function(){var e=Object(s.useDispatch)();return Object(s.useSelector)((function(e){return e.location.editedLocation.id})),Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsx)("h2",{children:"Create Location"}),Object(i.jsx)("hr",{}),Object(i.jsx)(rt,{onSubmit:function(t){e(function(e,t){var c=K.js2xml(e,M);return function(e){fetch("/soa-lab1/locations",{method:"POST",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<locationDTOList><locations><location>"+c+"</location></locations></locationDTOList>"}).then((function(e){if(e.ok)return e.text();throw e})).then((function(e){St.push("/soa-lab1"),window.location.reload(!1)})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(t))}})]})},lt=Object(te.a)({form:"edit-person-form",keepDirtyOnReinitialize:!0})((function(e){var t=e.handleSubmit,o=(e.pristine,e.reset,e.submitting),a=e.id,r=Object(s.useDispatch)(),l=Object(s.useSelector)((function(e){return e.person.editedPerson})),d=Object(s.useSelector)((function(e){return e.location.locationsList})),u=Object(c.f)();return Object(C.useEffect)((function(){r(function(e){return function(t){fetch("/soa-lab1/persons/"+e,{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(console.log("STATUS "+e.status),!e.ok)throw e;return e.text()})).then((function(e){console.log(e);var n=K.xml2js(e,B).personDTOList.persons.person;t({type:re,payload:n})})).catch((function(e){e.text().then((function(e){var c=n(12).xml2js(e,B).exceptionDTO.message;t(U.a.error(F(c)))}))}))}}(a)),r(it())}),[]),Object(C.useEffect)((function(){e.reset(),e.initialize({id:l.id,height:l.height,eyeColor:l.eyeColor,locations:l.location.id})}),[l,d]),Object(i.jsx)("form",{onSubmit:t,id:"ticket-form",children:Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Screenwriter"}),Object(i.jsx)("div",{className:"label",children:"Location name"}),Object(i.jsxs)("div",{className:"buttons-div",children:[Object(i.jsx)(ee.a,{name:"locations",id:"locations",component:"select",label:"Coordinates",children:d.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(i.jsx)("button",{id:"location-form-but",onClick:function(e){e.preventDefault();var t=document.getElementById("locations");u.push("/soa-lab1/location/edit/"+t.value)},children:"Edit"}),Object(i.jsx)("button",{id:"location-form-but",onClick:function(e){e.preventDefault(),u.push("/soa-lab1/location/new")},children:"Create"})]}),Object(i.jsx)(ee.a,{name:"height",type:"number",component:ce,label:"Height"}),Object(i.jsx)("div",{className:"label",children:"Eye color"}),Object(i.jsx)(ee.a,{name:"eyeColor",component:"select",label:"Eye color",children:oe.map((function(e){return Object(i.jsxs)("option",{value:e,children:[e," "]},e)}))}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:o,children:"Submit"})})]})})}));var dt=function(){var e=Object(c.g)().id,t=Object(s.useDispatch)(),o=Object(s.useSelector)((function(e){return e.tickets.editedTicket.id}));return Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsxs)("h2",{children:["Edit Person (ID: ",e,")"]}),Object(i.jsx)("hr",{}),Object(i.jsx)(lt,{id:e,onSubmit:function(e){t(function(e,t){var c=K.js2xml(le(e),M);return console.log("XML = "+c),function(e){fetch("/soa-lab1/persons",{method:"PUT",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<personDTOList><persons><person>"+c+"</person></persons></personDTOList>"}).then((function(e){if(!e.ok)throw e;St.push("/soa-lab1/edit/"+t),window.location.reload(!1)})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(e,o))}})]})},ut=Object(te.a)({form:"create-person-form"})((function(e){var t=e.handleSubmit,n=(e.pristine,e.reset,e.submitting),c=(e.id,Object(s.useDispatch)()),o=Object(s.useSelector)((function(e){return e.location.locationsList}));return Object(C.useEffect)((function(){c(it())}),[]),Object(C.useEffect)((function(){e.reset(),e.initialize({locations:o[0].id,eyeColor:oe[0]})}),[o]),Object(i.jsx)("form",{onSubmit:t,id:"ticket-form",children:Object(i.jsxs)("div",{className:"ticket-form",children:[Object(i.jsx)("h3",{children:"Person"}),Object(i.jsx)("div",{className:"label",children:"Location name"}),Object(i.jsx)(ee.a,{name:"locations",id:"locations",component:"select",label:"Coordinates",children:o.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(i.jsx)(ee.a,{name:"height",type:"number",component:ce,label:"Height (kilo)"}),Object(i.jsx)("div",{className:"label",children:"Eye color"}),Object(i.jsx)(ee.a,{name:"eyeColor",component:"select",label:"Eye color",children:oe.map((function(e){return Object(i.jsxs)("option",{value:e,children:[e," "]},e)}))}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"edit-form-but",disabled:n,children:"Submit"})})]})})}));var jt=function(){var e=Object(s.useDispatch)();return Object(s.useSelector)((function(e){return e.person.editedPerson.id})),Object(i.jsxs)("div",{className:"table-layout",children:[Object(i.jsx)("h2",{children:"Create Person"}),Object(i.jsx)("hr",{}),Object(i.jsx)(ut,{onSubmit:function(t){e(function(e,t){var c=K.js2xml(le(e),M);return console.log("XML"+c),function(e){fetch("/soa-lab1/persons",{method:"POST",headers:{"Content-Type":"application/xml; charset=utf-8"},body:"<personDTOList><persons><person>"+c+"</person></persons></personDTOList>"}).then((function(e){if(!e.ok)throw e;St.push("/soa-lab1"),window.location.reload(!1)})).catch((function(t){t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}}(t))}})]})},bt="SET_TYPE_LIST",Ot="SET_TICKET_COUNT",mt="SET_TICKET_LIST",ht="SET_PERSON_LIST";var ft=function(){var e=Object(c.f)(),t=Object(s.useDispatch)(),o=Object(s.useSelector)((function(e){return e.additional.typeList}));return Object(C.useEffect)((function(){t((function(e){fetch("/soa-lab1/additional",{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(!e.ok)throw e;return e.text()})).then((function(t){console.log(t);var n=K.xml2js(t,B);e({type:bt,payload:n.ticketTypeDTOList.ticketTypes.ticketType})})).catch((function(t){console.log(t),t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}))}),[]),Object(i.jsxs)("div",{className:"task-layout",children:[Object(i.jsx)("h1",{children:"Ticket types task"}),Object(i.jsx)("div",{className:"add-task-container",children:Object(i.jsx)("div",{children:"What unique ticket types are presented in table"})}),o&&o.length>0&&o.map((function(e){return Object(i.jsx)("li",{children:e.type})})),Object(i.jsx)("button",{className:"back-movie-but",onClick:function(){e.push("/soa-lab1"),t({type:bt,payload:[]})},children:"BACK TO MOVIES"})]})};var pt=function(){return Object(s.useDispatch)(),Object(i.jsxs)("div",{className:"table-header base",id:"table-header",children:[Object(i.jsx)("div",{className:"id-div",children:Object(i.jsx)("span",{children:"Id"})}),Object(i.jsx)("div",{children:Object(i.jsx)("span",{children:"Name"})}),Object(i.jsx)("div",{children:Object(i.jsx)("span",{children:"Discount"})})]})};var xt=function(e){var t=e.person,n=t.id;return Object(i.jsxs)("div",{className:"table-row base",children:[Object(i.jsx)("div",{className:"id-div",children:n}),Object(i.jsx)("div",{children:t.name}),Object(i.jsx)("div",{children:t.discount})]})};var vt=function(e){var t,n=e.personList;return void 0===n?Object(i.jsx)("div",{className:"table-row base id-div",children:Object(i.jsx)("div",{className:"id-div",children:"No data."})}):(Array.isArray(n)?t=n.map((function(e){return Object(i.jsx)(xt,{person:e},e.id)})):(console.log("NOT ARRAY"),t=Object(i.jsx)(xt,{person:n},n.id)),Object(i.jsx)("div",{children:t}))};var yt=function(){var e=Object(s.useSelector)((function(e){return e.additional.ticketList}));return Object(i.jsxs)("div",{className:"movie-table",children:[Object(i.jsx)(pt,{}),Object(i.jsx)(vt,{personList:e})]})};var gt=function(){var e=Object(c.f)(),t=Object(s.useDispatch)(),o=Object(s.useSelector)((function(e){return e.additional.ticketList})),a=Object(C.useState)(""),r=Object(E.a)(a,2),l=r[0],d=r[1];return Object(C.useEffect)((function(){return e.listen((function(n){"POP"===e.action&&t({type:mt,payload:[]})}))}),[]),Object(i.jsxs)("div",{className:"task-layout",children:[Object(i.jsx)("h1",{children:"Discount task"}),Object(i.jsxs)("div",{className:"add-task-container",children:[Object(i.jsx)("div",{children:"Get tickets exist with discount less than"}),Object(i.jsx)("input",{type:"number",className:"add-input",value:l,onChange:function(e){var t=e.target.value;d(t)},onFocus:function(e){d(""),t({type:mt,payload:[]})},onBlur:function(e){var c,i=e.target.value;""!==i&&Number.isInteger(Number(i))&&Number(i)>=0?t((c=i,console.log("DISCOUNT = "+c),function(e){var t="/soa-lab1/additional?discount="+c;console.log(t),fetch(t,{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(!e.ok)throw e;return e.text()})).then((function(t){console.log(t);var n=K.xml2js(t,B);console.log(n),e({type:mt,payload:n.ticketDTOList.tickets.ticket})})).catch((function(t){console.log(t),t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))})):d("")}})]}),(!Array.isArray(o)||o.length>0)&&Object(i.jsx)(yt,{}),Object(i.jsx)("button",{className:"back-movie-but",onClick:function(){t({type:mt,payload:[]}),e.push("/soa-lab1")},children:"BACK TO TICKETS"})]})};var kt=function(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)((function(e){return e.person.personsList})),o=Object(s.useSelector)((function(e){return e.additional.ticketCount})),a=Object(c.f)();function r(t){var c,i=t.target.value;""!==i&&e((c=i,function(e){fetch("/soa-lab1/additional?person="+c,{method:"GET",headers:{"Content-Type":"application/xml; charset=utf-8"}}).then((function(e){if(console.log("STATUS "+e.status),!e.ok)throw e;return e.text()})).then((function(t){var n=K.xml2js(t,B);e({type:Ot,payload:n.countDTO.count})})).catch((function(t){console.log(t),t.text().then((function(t){var c=n(12).xml2js(t,B).exceptionDTO.message;e(U.a.error(F(c)))}))}))}))}return Object(C.useEffect)((function(){e(se())}),[]),Object(C.useEffect)((function(){return a.listen((function(t){"POP"===a.action&&e({type:ht,payload:[]})}))}),[]),Object(i.jsxs)("div",{className:"task-layout",children:[Object(i.jsx)("h1",{children:"Person task"}),Object(i.jsxs)("div",{className:"add-task-container",children:[Object(i.jsx)("div",{children:"Count tickets with PERSON's id less than"}),Object(i.jsx)("select",{className:"add-select",onChange:r,onBlur:r,children:t.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.id},e.id)}))})]}),""!==o&&Object(i.jsxs)("div",{className:"answer",children:[" Answer: ",o]}),Object(i.jsx)("button",{className:"back-movie-but",onClick:function(){a.push("/soa-lab1"),e({type:Ot,payload:""})},children:"BACK TO TICKETS"})]})},St=me()();var Tt=function(){var e=Object(s.useSelector)((function(e){return e.notifications})),t=Object(s.useSelector)((function(e){return e.page.modalActive})),n=Object(s.useDispatch)(),o=Object(s.useSelector)((function(e){return e.page.curCriterion}));return Object(i.jsxs)("div",{className:"app",children:[Object(i.jsxs)(Qe,{active:t,setActive:function(e){n({type:"SHOW_MODAL",payload:e})},id:"modal",children:[o===l&&Object(i.jsx)(ve,{}),o===d&&Object(i.jsx)(Se,{}),o===u&&Object(i.jsx)(Ee,{}),o===j&&Object(i.jsx)(Ae,{}),o===b&&Object(i.jsx)(Ye,{}),o===O&&Object(i.jsx)(He,{}),o===m&&Object(i.jsx)(Xe,{}),o===h&&Object(i.jsx)(Je,{})]}),Object(i.jsx)($.a,{history:St,children:Object(i.jsxs)(c.c,{children:[Object(i.jsx)(c.a,{path:"/soa-lab1/edit/:id",children:Object(i.jsx)(ue,{})}),Object(i.jsx)(c.a,{path:"/soa-lab1/coordinates/edit/:id",children:Object(i.jsx)($e,{})}),Object(i.jsx)(c.a,{path:"/soa-lab1/location/edit/:id",children:Object(i.jsx)(at,{})}),Object(i.jsx)(c.a,{path:"/soa-lab1/person/edit/:id",children:Object(i.jsx)(dt,{})}),Object(i.jsx)(c.a,{exact:!0,path:"/soa-lab1/coordinates/new",children:Object(i.jsx)(tt,{})}),Object(i.jsx)(c.a,{exact:!0,path:"/soa-lab1/location/new",children:Object(i.jsx)(st,{})}),Object(i.jsx)(c.a,{exact:!0,path:"/soa-lab1/person/new",children:Object(i.jsx)(jt,{})}),Object(i.jsx)(c.a,{exact:!0,path:"/soa-lab1/additional/type",children:Object(i.jsx)(ft,{})}),Object(i.jsx)(c.a,{exact:!0,path:"/soa-lab1/additional/discount",children:Object(i.jsx)(gt,{})}),Object(i.jsx)(c.a,{exact:!0,path:"/soa-lab1/additional/person",children:Object(i.jsx)(kt,{})}),Object(i.jsx)(c.a,{path:"/soa-lab1/new",children:Object(i.jsx)(be,{})}),Object(i.jsx)(c.a,{exact:!0,path:"/soa-lab1",children:Object(i.jsx)(Z,{})})]})}),Object(i.jsx)(U.a,{notifications:e})]})},Nt=n(52),Dt=n.n(Nt),Et=n(16),Ct={ticketList:[],editedTicket:{coordinates:{id:"",x:"",y:""},person:{id:"",eyeColor:"",height:"",location:{id:"",x:"",name:"",y:""}}}};var Lt=n(103),wt={perPage:10,currentPage:1,itemCount:"",deleteItem:0,sortBy:[],modalActive:!1,filters:[],curCriterion:""};var It=n(137),Pt={coordinatesList:[{id:"",x:"",y:""}],editedCoordinates:{id:"",x:"",y:""}};var Rt={locationsList:[{id:"",x:"",y:"",name:""}],editedLocation:{id:"",x:"",y:"",name:""}};var _t={personsList:[{id:"",height:"",eyeColor:"",location:{}}],editedPerson:{id:"",height:"",eyeColor:"",location:{}}};var At={ticketCount:"",typeList:[],ticketList:[],personList:[]};var Bt=Object(Et.combineReducers)({tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return console.log(t.payload),Object(ne.a)(Object(ne.a)({},e),{},{ticketList:t.payload});case R:return console.log(t.payload),Object(ne.a)(Object(ne.a)({},e),{},{editedTicket:t.payload});default:return e}},notifications:Y.reducer,page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(ne.a)(Object(ne.a)({},e),{},{perPage:t.payload});case p:return Object(ne.a)(Object(ne.a)({},e),{},{currentPage:t.payload});case x:return Object(ne.a)(Object(ne.a)({},e),{},{curCriterion:t.payload});case v:return Object(ne.a)(Object(ne.a)({},e),{},{itemCount:t.payload});case y:return Object(ne.a)(Object(ne.a)({},e),{},{deleteItem:e.deleteItem+1});case g:return Object(ne.a)(Object(ne.a)({},e),{},{sortBy:[].concat(Object(Lt.a)(e.sortBy),[t.payload])});case k:return Object(ne.a)(Object(ne.a)({},e),{},{sortBy:e.sortBy.filter((function(e){return e!==t.payload}))});case S:return Object(ne.a)(Object(ne.a)({},e),{},{modalActive:t.payload});case T:return Object(ne.a)(Object(ne.a)({},e),{},{filters:[].concat(Object(Lt.a)(e.filters),[t.payload])});case N:return Object(ne.a)(Object(ne.a)({},e),{},{filters:e.filters.filter((function(e){return e.name!==t.payload}))});default:return e}},coordinates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return console.log(t.payload),Object(ne.a)(Object(ne.a)({},e),{},{coordinatesList:t.payload});case q:return console.log(t.payload),Object(ne.a)(Object(ne.a)({},e),{},{editedCoordinates:t.payload});default:return e}},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nt:return console.log(t.payload),Object(ne.a)(Object(ne.a)({},e),{},{locationsList:t.payload});case ct:return console.log(t.payload),Object(ne.a)(Object(ne.a)({},e),{},{editedLocation:t.payload});default:return e}},person:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(ne.a)(Object(ne.a)({},e),{},{personsList:t.payload});case re:return Object(ne.a)(Object(ne.a)({},e),{},{editedPerson:t.payload});default:return e}},additional:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt:return Object(ne.a)(Object(ne.a)({},e),{},{typeList:t.payload});case Ot:return Object(ne.a)(Object(ne.a)({},e),{},{ticketCount:t.payload});case mt:return Object(ne.a)(Object(ne.a)({},e),{},{ticketList:t.payload});case ht:return Object(ne.a)(Object(ne.a)({},e),{},{personList:t.payload});default:return e}},form:It.a}),Mt=n(143),Kt=n(144),Yt=n.n(Kt),Ut=n(145),Ft=Object(Et.createStore)(Bt,Object(Mt.composeWithDevTools)(Object(Et.applyMiddleware)(Ut.a,Yt.a)));Dt.a.render(Object(i.jsx)(s.Provider,{store:Ft,children:Object(i.jsx)(Tt,{})}),document.getElementById("root"))},32:function(e,t,n){}},[[316,1,2]]]);
//# sourceMappingURL=main.65d9860e.chunk.js.map